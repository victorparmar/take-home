(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{26:function(e,a,t){e.exports=t.p+"static/media/funny-car-auto-insurance-quote.f730b603.png"},28:function(e,a,t){e.exports=t.p+"static/media/insurance-coverage.a2e88028.jpg"},31:function(e,a,t){e.exports=t(66)},32:function(e,a,t){},34:function(e,a,t){},36:function(e,a,t){},42:function(e,a,t){},52:function(e,a,t){},54:function(e,a,t){},56:function(e,a,t){},59:function(e,a,t){},66:function(e,a,t){"use strict";t.r(a);t(32),t(34),t(36);var n,r=t(0),c=t.n(r),s=t(20),o=t.n(s),i=(t(42),t(5)),l=t(6),u=t(8),d=t(7),m=t(9),p=t(70),h=t(69),E=t(10),f=t(11),g=t(24),y=t.n(g),b=t(12),v=t(25),C=(t(52),t(54),function(e){return c.a.createElement("div",{className:"bg-gray",style:{marginBottom:"1rem"}},c.a.createElement("section",{className:"container grid-xs",style:{paddingTop:"2rem",paddingBottom:"1rem"}},c.a.createElement("h1",{className:"text-center title mysurance"},"MySurance"),c.a.createElement("div",{className:"text-center subtitle"},"Stay secured, live free!")))}),N=t(26),I=t.n(N),O=t(2),k=(t(56),function(e){function a(){var e,t;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(t=Object(u.a)(this,(e=Object(d.a)(a)).call.apply(e,[this].concat(r)))).handleCancelClick=function(e){e.preventDefault(),t.props.doModalActionCancel()},t.handleOkClick=function(e){e.preventDefault(),t.props.doModalActionExecute(),t.props.doModalActionCancel()},t}return Object(m.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){return this.props.showModal?c.a.createElement("div",{id:"delete-insurance-modal",className:"modal modal-sm active"},c.a.createElement("div",{className:"modal-overlay"}),c.a.createElement("div",{className:"modal-container",role:"document"},c.a.createElement("div",{className:"modal-header"},c.a.createElement("div",{className:"modal-title"},c.a.createElement("h6",null,"Delete Insurance"))),c.a.createElement("div",{className:"modal-body"},c.a.createElement("div",{className:"content"},c.a.createElement("p",null,"Are you sure you want to delete the following insurance?"),c.a.createElement("code",{className:"smash-it"},this.props.content))),c.a.createElement("div",{className:"modal-footer"},this.renderButtonCancel(),"\xa0",this.renderButtonExecute()))):null}},{key:"renderButtonCancel",value:function(){return c.a.createElement("button",{className:"btn",type:"button",onClick:this.handleCancelClick},"Cancel")}},{key:"renderButtonExecute",value:function(){return c.a.createElement("button",{className:"btn btn-primary",type:"button",onClick:this.handleOkClick},"Delete")}}]),a}(r.Component)),j=t(27),S=t.n(j),A="INSURANCE_CATEGORIES_GET_DATA_START",D="INSURANCE_CATEGORIES_GET_DATA_END",T="INSURANCE_CATEGORIES_SET_DATA",w="ADD_INSURANCE_SET_DATA",x="ADD_INSURANCE",M="REMOVE_INSURANCE",P={addInsuranceSetData:function(e){return{type:w,insurance:e}},addInsurance:function(e){return{type:x,insurance:e}},addInsuranceSaveThunk:function(e,a,t){return function(n,r){e.category=e.category?e.category:a[0],n(P.addInsurance(e)),t&&n(Object(f.b)(t))}},insuranceCategoriesGetDataStart:function(){return{type:A}},insuranceCategoriesGetDataEnd:function(){return{type:D}},insuranceCategoriesSetData:function(e){return{type:T,insuranceCategories:e}},insuranceCategoriesGetDataThunk:function(e){return function(a,t){return a(P.insuranceCategoriesGetDataStart()),S()("https://en.wikipedia.org/w/api.php?action=query&list=categorymembers&cmtitle=Category:Types_of_insurance&cmtype=subcat&format=json&origin=*",{method:"GET",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(t){var n=t.query.categorymembers.map(function(e){return e.title.slice(9)});a(P.insuranceCategoriesSetData(n)),a(P.insuranceCategoriesGetDataEnd()),e&&a(Object(f.b)(e))}).catch(function(e){console.error(e),alert(e)})}},removeInsurance:function(e){return{type:M,index:e}}},R=P,_=function(e){function a(){var e,t;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(t=Object(u.a)(this,(e=Object(d.a)(a)).call.apply(e,[this].concat(r)))).state={showModal:!1,modalContent:"",doModalActionExecute:function(){}},t.doModalActionCancel=function(){var e=t.state;t.setState(Object(O.a)({},e,{showModal:!1}))},t.handleInsuranceClick=function(e,a,n){var r=t.state;t.setState(Object(O.a)({},r,{showModal:!0,modalContent:JSON.stringify(e),doModalActionExecute:function(){t.props.doRemoveInsurance(a)}}))},t}return Object(m.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){var e=this,a=0;return this.props.insurances.forEach(function(e){a+=e.yearlyPremium}),c.a.createElement("div",null,c.a.createElement(k,{showModal:this.state.showModal,content:this.state.modalContent,doModalActionCancel:this.doModalActionCancel,doModalActionExecute:this.state.doModalActionExecute}),c.a.createElement("p",{className:"app-content"},"The following is a list of your current insurances. Click on an insurance to delete it."),c.a.createElement("table",{className:"table table-striped table-hover table-insurances"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",{className:"text-center"},"Title"),c.a.createElement("th",{className:"text-center"},"Category"),c.a.createElement("th",{className:"text-center"},"Yearly Premium"))),c.a.createElement("tbody",null,this.props.insurances.map(function(a,t){var n=e.handleInsuranceClick.bind(e,a,t);return c.a.createElement("tr",{key:t,onClick:n},c.a.createElement("td",null,a.title),c.a.createElement("td",{className:"text-center"},a.category),c.a.createElement("td",{className:"text-right"},a.yearlyPremium))}))),c.a.createElement("p",{className:"text-right"},c.a.createElement("span",{className:"total-expenses-label"},"Total expenses:"),"\xa0",c.a.createElement("span",{className:"total-expenses"},"CHF ",a.toFixed(2))))}}]),a}(r.Component),G=Object(E.b)(function(e){return{insurances:e.insurances}},function(e){return{doRemoveInsurance:function(a){e(R.removeInsurance(a))}}})(_),F=function(e){return c.a.createElement("div",{className:"empty"},c.a.createElement("div",{className:"empty-icon"},c.a.createElement("i",{className:"icon icon-people"})),c.a.createElement("p",{className:"empty-title h5"},"You have no insurances"),c.a.createElement("p",{className:"empty-subtitle"},"Click the button to add an insurance."),c.a.createElement("div",{className:"empty-action"},c.a.createElement("button",{id:"btn-add-insurance",className:"btn btn-primary",onClick:e.handleBtnAddInsuranceClick},"Add an insurance")))},B=function(e){function a(){var e,t;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(t=Object(u.a)(this,(e=Object(d.a)(a)).call.apply(e,[this].concat(r)))).handleBtnAddInsuranceClick=function(){t.props.doResetAddInsuranceData();t.props.insuranceCategories.length?t.props.doRedirect("/add-insurance"):t.props.doInsuranceCategoriesGetDataThunk("/add-insurance")},t}return Object(m.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){return this.props.insuranceCategoriesFetchIndicator?this.renderIndicator():this.renderContent()}},{key:"renderIndicator",value:function(){return c.a.createElement("div",{className:"loading loading-lg"})}},{key:"renderContent",value:function(){return c.a.createElement("section",{className:"container grid-xs"},c.a.createElement("p",{className:"app-content"},c.a.createElement("img",{className:"centered img-responsive",src:I.a,alt:"funny"})),this.props.insurances.length?this.renderInsurances():this.renderEmptyState())}},{key:"renderInsurances",value:function(){return c.a.createElement("div",null,c.a.createElement(G,null),c.a.createElement("p",{className:"text-center app-content"},c.a.createElement("button",{id:"btn-add-insurance",className:"btn btn-primary",onClick:this.handleBtnAddInsuranceClick},"Add an insurance")))}},{key:"renderEmptyState",value:function(){return c.a.createElement(F,{handleBtnAddInsuranceClick:this.handleBtnAddInsuranceClick})}}]),a}(r.Component),H=Object(E.b)(function(e){return{insurances:e.insurances,insuranceCategories:e.insuranceCategories,insuranceCategoriesFetchIndicator:e.insuranceCategoriesFetchIndicator}},function(e){return{doRedirect:function(a){e(Object(f.b)(a))},doResetAddInsuranceData:function(){e(R.addInsuranceSetData({title:"",yearlyPremium:0,category:""}))},doInsuranceCategoriesGetDataThunk:function(a){e(R.insuranceCategoriesGetDataThunk(a))}}})(B),U=t(28),q=t.n(U),J=function(e){return e.formHint?c.a.createElement("div",{className:"form-group form-input-hint fade-in"},c.a.createElement("div",{className:"col-4"}),c.a.createElement("div",{className:"col-8"},e.formHint)):null},Y=function(e){function a(){var e,t;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(t=Object(u.a)(this,(e=Object(d.a)(a)).call.apply(e,[this].concat(r)))).handleTitleChange=function(e){t.props.doAddInsuranceSetData(Object(O.a)({},t.props.addInsurance,{title:e.target.value}))},t.handleYearlyPremiumChange=function(e){var a=parseInt(e.target.value,10);t.props.doAddInsuranceSetData(Object(O.a)({},t.props.addInsurance,{yearlyPremium:a}))},t.handleCategorySelectionChange=function(e){t.props.doAddInsuranceSetData(Object(O.a)({},t.props.addInsurance,{category:e.target.value}))},t.handleSaveInsuranceClick=function(e){e.preventDefault(),e.stopPropagation();var a={title:t.props.addInsurance.title,yearlyPremium:t.props.addInsurance.yearlyPremium,category:t.props.addInsurance.category};""===t.props.addInsurance.titleErrorMsg&&""===t.props.addInsurance.yearlyPremiumErrorMsg&&t.props.doAddInsuranceSaveThunk(a,t.props.insuranceCategories,"/")},t.handleSubmit=function(e){e.preventDefault(),e.stopPropagation()},t}return Object(m.a)(a,e),Object(l.a)(a,[{key:"componentDidMount",value:function(){0===this.props.insuranceCategories.length&&this.props.doInsuranceCategoriesGetDataThunk()}},{key:"render",value:function(){return this.props.insuranceCategoriesFetchIndicator?this.renderIndicator():this.renderForm()}},{key:"renderIndicator",value:function(){return c.a.createElement("div",{className:"loading loading-lg"})}},{key:"renderForm",value:function(){var e=this.props.insuranceCategories.map(function(e){return c.a.createElement("option",{key:e,value:e},e)});return c.a.createElement("section",{className:"container grid-xs"},c.a.createElement("h5",null,"Add an insurance"),c.a.createElement("p",{className:"app-content"},c.a.createElement("img",{className:"centered img-responsive",src:q.a,alt:"funny"})),c.a.createElement("div",{className:"columns app-content"},c.a.createElement("div",{className:"column col-12"},c.a.createElement("form",{className:"form-horizontal",onSubmit:this.handleSubmit},c.a.createElement("div",{className:"form-group"},c.a.createElement("div",{className:"col-4"},c.a.createElement("label",{className:"form-label"},"Title")),c.a.createElement("div",{className:"col-8"},c.a.createElement("input",{id:"title",className:"form-input",type:"text",value:this.props.addInsurance.title,onChange:this.handleTitleChange}))),c.a.createElement(J,{formHint:this.props.addInsurance.titleErrorMsg}),c.a.createElement("div",{className:"form-group"},c.a.createElement("div",{className:"col-4"},c.a.createElement("label",{className:"form-label"},"Yearly premium")),c.a.createElement("div",{className:"col-8"},c.a.createElement("div",{className:"input-group"},c.a.createElement("span",{className:"input-group-addon"},"CHF"),c.a.createElement("input",{id:"yearly-premium",className:"form-input",type:"number",min:"0",value:isNaN(this.props.addInsurance.yearlyPremium)?"":this.props.addInsurance.yearlyPremium,onChange:this.handleYearlyPremiumChange})))),c.a.createElement(J,{formHint:this.props.addInsurance.yearlyPremiumErrorMsg}),c.a.createElement("div",{className:"form-group"},c.a.createElement("div",{className:"col-4"},c.a.createElement("label",{className:"form-label"},"Category")),c.a.createElement("div",{className:"col-8"},c.a.createElement("select",{className:"form-select",value:this.props.addInsurance.category,onChange:this.handleCategorySelectionChange},e))),c.a.createElement("div",{className:"form-group main-action"},c.a.createElement("div",{className:"col-12 text-center"},c.a.createElement("button",{id:"btn-save-insurance",type:"submit",className:"btn btn-primary "+(this.props.addInsurance.titleErrorMsg||this.props.addInsurance.yearlyPremiumErrorMsg||!this.props.addInsurance.title?"disabled":""),onClick:this.handleSaveInsuranceClick},"Save Insurance")))))))}}]),a}(r.Component),L=Object(E.b)(function(e){return{insuranceCategories:e.insuranceCategories,insuranceCategoriesFetchIndicator:e.insuranceCategoriesFetchIndicator,addInsurance:e.addInsurance}},function(e){return{doInsuranceCategoriesGetDataThunk:function(a){e(R.insuranceCategoriesGetDataThunk(a))},doAddInsuranceSetData:function(a){e(R.addInsuranceSetData(a))},doAddInsuranceSaveThunk:function(a,t,n){e(R.addInsuranceSaveThunk(a,t,n))}}})(Y),z=(t(59),function(e){return c.a.createElement("footer",{className:"bg-gray"},c.a.createElement("section",{className:"grid-footer container grid-xs"},c.a.createElement("div",{className:"mysurance logo"},"MySurance"),c.a.createElement("div",null,"We do not use any cookies nor store any personal information. All data is stored in browser localStorage (if enabled)."),c.a.createElement("div",null,"Licensed under the ",c.a.createElement("a",{href:"https://github.com/wheresvic/mysurance/blob/master/LICENSE"},"MIT License"),".")))}),V=t(29),W=(new(t.n(V).a),function(e){try{return e()}catch(a){a&&"SecurityError"===a.name?console.log("Please enable cookies to be auto logged-in"):console.error(a)}}),K=function(e){e.dispatch;var a=e.getState;return function(e){return function(t){switch(t.type){case x:case M:var n=e(t),r=a().insurances;return c="insurances",s=r,W(function(){window.localStorage&&window.localStorage.setItem(c,JSON.stringify(s))}),n}var c,s;return e(t)}}},Q=t(14),X={insuranceCategories:[],insuranceCategoriesFetchIndicator:!1,insurances:[],addInsurance:{title:"",titleErrorMsg:"",yearlyPremium:0,yearlyPremiumErrorMsg:"",category:""}},Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case x:return Object(O.a)({},e,{insurances:[].concat(Object(Q.a)(e.insurances),[Object(O.a)({},a.insurance)])});case w:var t=a.insurance,n=Object(O.a)({},t,{titleErrorMsg:t.title?"":"Required.",yearlyPremiumErrorMsg:isNaN(t.yearlyPremium)?"Required.":""});return Object(O.a)({},e,{addInsurance:n});case T:return Object(O.a)({},e,{insuranceCategories:Object(Q.a)(a.insuranceCategories)});case A:return Object(O.a)({},e,{insuranceCategoriesFetchIndicator:!0});case D:return Object(O.a)({},e,{insuranceCategoriesFetchIndicator:!1});case M:var r=Object(Q.a)(e.insurances);return r.splice(a.index,1),Object(O.a)({},e,{insurances:r});default:return e}},$=y()(),ee=Object(b.c)(Z,Object(b.a)(Object(f.c)($),K,v.a)),ae=(n="insurances",W(function(){if(window.localStorage){var e=window.localStorage.getItem(n);if(e)return JSON.parse(e)}return null}));ae&&ae.forEach(function(e){ee.dispatch(R.addInsurance(e))});var te=function(e){function a(){return Object(i.a)(this,a),Object(u.a)(this,Object(d.a)(a).apply(this,arguments))}return Object(m.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){return c.a.createElement(E.a,{store:ee},c.a.createElement(f.a,{history:$},c.a.createElement("div",null,c.a.createElement(C,null),c.a.createElement(p.a,null,c.a.createElement(h.a,{exact:!0,path:"/",component:H}),c.a.createElement(h.a,{exact:!0,path:"/add-insurance",component:L})),c.a.createElement(z,null))))}}]),a}(r.Component);o.a.render(c.a.createElement(te,null),document.getElementById("root"))}},[[31,2,1]]]);
//# sourceMappingURL=main.d144d7e8.chunk.js.map