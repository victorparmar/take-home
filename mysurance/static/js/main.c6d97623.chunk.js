(window.webpackJsonpmysurance=window.webpackJsonpmysurance||[]).push([[0],{23:function(e,t,n){e.exports=n.p+"static/media/funny-car-auto-insurance-quote.f730b603.png"},25:function(e,t,n){e.exports=n.p+"static/media/insurance-coverage.a2e88028.jpg"},29:function(e,t,n){e.exports=n(58)},30:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){},37:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},45:function(e,t,n){},58:function(e,t,n){"use strict";n.r(t);n(30),n(31),n(32);var a=n(0),r=n.n(a),c=n(18),o=n.n(c),s=(n(37),n(3)),i=n(4),l=n(6),u=n(5),d=n(7),m=n(62),p=n(61),f=n(9),h=n(10),y=n(27),g=n.n(y),E=n(12),b=n(22),v=(n(41),n(42),function(e){return r.a.createElement("div",{className:"bg-gray",style:{marginBottom:"1rem"}},r.a.createElement("section",{className:"container grid-xs",style:{paddingTop:"2rem",paddingBottom:"1rem"}},r.a.createElement("h1",{className:"text-center title mysurance"},"MySurance"),r.a.createElement("div",{className:"text-center subtitle"},"Stay secured, live free!")))}),C=n(23),O=n.n(C),N=n(11),I=(n(43),function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleCancelClick=function(e){e.preventDefault(),n.props.doModalActionCancel()},n.handleOkClick=function(e){e.preventDefault(),n.props.doModalActionExecute(),n.props.doModalActionCancel()},n}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return this.props.showModal?r.a.createElement("div",{id:"delete-insurance-modal",className:"modal modal-sm active"},r.a.createElement("div",{className:"modal-overlay"}),r.a.createElement("div",{className:"modal-container",role:"document"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("div",{className:"modal-title"},r.a.createElement("h6",null,"Delete Insurance"))),r.a.createElement("div",{className:"modal-body"},r.a.createElement("div",{className:"content"},r.a.createElement("p",null,"Are you sure you want to delete the following insurance?"),r.a.createElement("code",{className:"smash-it"},this.props.content))),r.a.createElement("div",{className:"modal-footer"},this.renderButtonCancel(),"\xa0",this.renderButtonExecute()))):null}},{key:"renderButtonCancel",value:function(){return r.a.createElement("button",{className:"btn",type:"button",onClick:this.handleCancelClick},"Cancel")}},{key:"renderButtonExecute",value:function(){return r.a.createElement("button",{className:"btn btn-primary",type:"button",onClick:this.handleOkClick},"Delete")}}]),t}(a.Component)),j=n(24),S=n.n(j),k="INSURANCE_CATEGORIES_GET_DATA_START",w="INSURANCE_CATEGORIES_GET_DATA_END",A="INSURANCE_CATEGORIES_SET_DATA",D="ADD_INSURANCE_SET_DATA",P="ADD_INSURANCE",T="REMOVE_INSURANCE",x={addInsuranceSetData:function(e){return{type:D,insurance:e}},addInsurance:function(e){return{type:P,insurance:e}},addInsuranceSaveThunk:function(e,t,n){return function(a,r){e.category=e.category?e.category:t[0],a(x.addInsurance(e)),n&&a(Object(h.b)(n))}},insuranceCategoriesGetDataStart:function(){return{type:k}},insuranceCategoriesGetDataEnd:function(){return{type:w}},insuranceCategoriesSetData:function(e){return{type:A,insuranceCategories:e}},insuranceCategoriesGetDataThunk:function(e){return function(t,n){return t(x.insuranceCategoriesGetDataStart()),S()("https://en.wikipedia.org/w/api.php?action=query&list=categorymembers&cmtitle=Category:Types_of_insurance&cmtype=subcat&format=json&origin=*",{method:"GET",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(n){var a=n.query.categorymembers.map(function(e){return e.title.slice(9)});t(x.insuranceCategoriesSetData(a)),t(x.insuranceCategoriesGetDataEnd()),e&&t(Object(h.b)(e))}).catch(function(e){console.error(e),alert(e)})}},removeInsurance:function(e){return{type:T,index:e}}},M=x;function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(n,!0).forEach(function(t){Object(N.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var G=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={showModal:!1,modalContent:"",doModalActionExecute:function(){}},n.doModalActionCancel=function(){var e=n.state;n.setState(_({},e,{showModal:!1}))},n.handleInsuranceClick=function(e,t,a){var r=n.state;n.setState(_({},r,{showModal:!0,modalContent:JSON.stringify(e),doModalActionExecute:function(){n.props.doRemoveInsurance(t)}}))},n}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=0;return this.props.insurances.forEach(function(e){t+=e.yearlyPremium}),r.a.createElement("div",null,r.a.createElement(I,{showModal:this.state.showModal,content:this.state.modalContent,doModalActionCancel:this.doModalActionCancel,doModalActionExecute:this.state.doModalActionExecute}),r.a.createElement("p",{className:"app-content"},"The following is a list of your current insurances. Click on an insurance to delete it."),r.a.createElement("table",{className:"table table-striped table-hover table-insurances"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"text-center"},"Title"),r.a.createElement("th",{className:"text-center"},"Category"),r.a.createElement("th",{className:"text-center"},"Yearly Premium"))),r.a.createElement("tbody",null,this.props.insurances.map(function(t,n){var a=e.handleInsuranceClick.bind(e,t,n);return r.a.createElement("tr",{key:n,onClick:a},r.a.createElement("td",null,t.title),r.a.createElement("td",{className:"text-center"},t.category),r.a.createElement("td",{className:"text-right"},t.yearlyPremium))}))),r.a.createElement("p",{className:"text-right"},r.a.createElement("span",{className:"total-expenses-label"},"Total expenses:"),"\xa0",r.a.createElement("span",{className:"total-expenses"},"CHF ",t.toFixed(2))))}}]),t}(a.Component),F=Object(f.b)(function(e){return{insurances:e.insurances}},function(e){return{doRemoveInsurance:function(t){e(M.removeInsurance(t))}}})(G),B=function(e){return r.a.createElement("div",{className:"empty"},r.a.createElement("div",{className:"empty-icon"},r.a.createElement("i",{className:"icon icon-people"})),r.a.createElement("p",{className:"empty-title h5"},"You have no insurances"),r.a.createElement("p",{className:"empty-subtitle"},"Click the button to add an insurance."),r.a.createElement("div",{className:"empty-action"},r.a.createElement("button",{id:"btn-add-insurance",className:"btn btn-primary",onClick:e.handleBtnAddInsuranceClick},"Add an insurance")))},H=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleBtnAddInsuranceClick=function(){n.props.doResetAddInsuranceData();n.props.insuranceCategories.length?n.props.doRedirect("/add-insurance"):n.props.doInsuranceCategoriesGetDataThunk("/add-insurance")},n}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return this.props.insuranceCategoriesFetchIndicator?this.renderIndicator():this.renderContent()}},{key:"renderIndicator",value:function(){return r.a.createElement("div",{className:"loading loading-lg"})}},{key:"renderContent",value:function(){return r.a.createElement("section",{className:"container grid-xs"},r.a.createElement("p",{className:"app-content"},r.a.createElement("img",{className:"centered img-responsive",src:O.a,alt:"funny"})),this.props.insurances.length?this.renderInsurances():this.renderEmptyState())}},{key:"renderInsurances",value:function(){return r.a.createElement("div",null,r.a.createElement(F,null),r.a.createElement("p",{className:"text-center app-content"},r.a.createElement("button",{id:"btn-add-insurance",className:"btn btn-primary",onClick:this.handleBtnAddInsuranceClick},"Add an insurance")))}},{key:"renderEmptyState",value:function(){return r.a.createElement(B,{handleBtnAddInsuranceClick:this.handleBtnAddInsuranceClick})}}]),t}(a.Component),U=Object(f.b)(function(e){return{insurances:e.insurances,insuranceCategories:e.insuranceCategories,insuranceCategoriesFetchIndicator:e.insuranceCategoriesFetchIndicator}},function(e){return{doRedirect:function(t){e(Object(h.b)(t))},doResetAddInsuranceData:function(){e(M.addInsuranceSetData({title:"",yearlyPremium:0,category:""}))},doInsuranceCategoriesGetDataThunk:function(t){e(M.insuranceCategoriesGetDataThunk(t))}}})(H),q=n(25),J=n.n(q),Y=function(e){return e.formHint?r.a.createElement("div",{className:"form-group form-input-hint fade-in"},r.a.createElement("div",{className:"col-4"}),r.a.createElement("div",{className:"col-8"},e.formHint)):null};function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(n,!0).forEach(function(t){Object(N.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var V=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleTitleChange=function(e){n.props.doAddInsuranceSetData(z({},n.props.addInsurance,{title:e.target.value}))},n.handleYearlyPremiumChange=function(e){var t=parseInt(e.target.value,10);n.props.doAddInsuranceSetData(z({},n.props.addInsurance,{yearlyPremium:t}))},n.handleCategorySelectionChange=function(e){n.props.doAddInsuranceSetData(z({},n.props.addInsurance,{category:e.target.value}))},n.handleSaveInsuranceClick=function(e){e.preventDefault(),e.stopPropagation();var t={title:n.props.addInsurance.title,yearlyPremium:n.props.addInsurance.yearlyPremium,category:n.props.addInsurance.category};""===n.props.addInsurance.titleErrorMsg&&""===n.props.addInsurance.yearlyPremiumErrorMsg&&n.props.doAddInsuranceSaveThunk(t,n.props.insuranceCategories,"/")},n.handleSubmit=function(e){e.preventDefault(),e.stopPropagation()},n}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){0===this.props.insuranceCategories.length&&this.props.doInsuranceCategoriesGetDataThunk()}},{key:"render",value:function(){return this.props.insuranceCategoriesFetchIndicator?this.renderIndicator():this.renderForm()}},{key:"renderIndicator",value:function(){return r.a.createElement("div",{className:"loading loading-lg"})}},{key:"renderForm",value:function(){var e=this.props.insuranceCategories.map(function(e){return r.a.createElement("option",{key:e,value:e},e)});return r.a.createElement("section",{className:"container grid-xs"},r.a.createElement("h5",null,"Add an insurance"),r.a.createElement("p",{className:"app-content"},r.a.createElement("img",{className:"centered img-responsive",src:J.a,alt:"funny"})),r.a.createElement("div",{className:"columns app-content"},r.a.createElement("div",{className:"column col-12"},r.a.createElement("form",{className:"form-horizontal",onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"col-4"},r.a.createElement("label",{className:"form-label"},"Title")),r.a.createElement("div",{className:"col-8"},r.a.createElement("input",{id:"title",className:"form-input",type:"text",value:this.props.addInsurance.title,onChange:this.handleTitleChange}))),r.a.createElement(Y,{formHint:this.props.addInsurance.titleErrorMsg}),r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"col-4"},r.a.createElement("label",{className:"form-label"},"Yearly premium")),r.a.createElement("div",{className:"col-8"},r.a.createElement("div",{className:"input-group"},r.a.createElement("span",{className:"input-group-addon"},"CHF"),r.a.createElement("input",{id:"yearly-premium",className:"form-input",type:"number",min:"0",value:isNaN(this.props.addInsurance.yearlyPremium)?"":this.props.addInsurance.yearlyPremium,onChange:this.handleYearlyPremiumChange})))),r.a.createElement(Y,{formHint:this.props.addInsurance.yearlyPremiumErrorMsg}),r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"col-4"},r.a.createElement("label",{className:"form-label"},"Category")),r.a.createElement("div",{className:"col-8"},r.a.createElement("select",{className:"form-select",value:this.props.addInsurance.category,onChange:this.handleCategorySelectionChange},e))),r.a.createElement("div",{className:"form-group main-action"},r.a.createElement("div",{className:"col-12 text-center"},r.a.createElement("button",{id:"btn-save-insurance",type:"submit",className:"btn btn-primary "+(this.props.addInsurance.titleErrorMsg||this.props.addInsurance.yearlyPremiumErrorMsg||!this.props.addInsurance.title?"disabled":""),onClick:this.handleSaveInsuranceClick},"Save Insurance")))))))}}]),t}(a.Component),W=Object(f.b)(function(e){return{insuranceCategories:e.insuranceCategories,insuranceCategoriesFetchIndicator:e.insuranceCategoriesFetchIndicator,addInsurance:e.addInsurance}},function(e){return{doInsuranceCategoriesGetDataThunk:function(t){e(M.insuranceCategoriesGetDataThunk(t))},doAddInsuranceSetData:function(t){e(M.addInsuranceSetData(t))},doAddInsuranceSaveThunk:function(t,n,a){e(M.addInsuranceSaveThunk(t,n,a))}}})(V),K=(n(45),function(e){return r.a.createElement("footer",{className:"bg-gray"},r.a.createElement("section",{className:"grid-footer container grid-xs"},r.a.createElement("div",{className:"mysurance logo"},"MySurance"),r.a.createElement("div",null,"We do not use any cookies nor store any personal information. All data is stored in browser localStorage (if enabled)."),r.a.createElement("div",null,"Licensed under the ",r.a.createElement("a",{href:"https://github.com/wheresvic/mysurance/blob/master/LICENSE"},"MIT License"),".")))}),Q=n(26),X=(new(n.n(Q).a),function(e){try{return e()}catch(t){t&&"SecurityError"===t.name?console.log("Please enable cookies to be auto logged-in"):console.error(t)}}),Z=function(e){e.dispatch;var t=e.getState;return function(e){return function(n){switch(n.type){case P:case T:var a=e(n),r=t().insurances;return c="insurances",o=r,X(function(){window.localStorage&&window.localStorage.setItem(c,JSON.stringify(o))}),a}var c,o;return e(n)}}},$=n(14);function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(n,!0).forEach(function(t){Object(N.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ne,ae={insuranceCategories:[],insuranceCategoriesFetchIndicator:!1,insurances:[],addInsurance:{title:"",titleErrorMsg:"",yearlyPremium:0,yearlyPremiumErrorMsg:"",category:""}},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:return te({},e,{insurances:[].concat(Object($.a)(e.insurances),[te({},t.insurance)])});case D:var n=t.insurance,a=te({},n,{titleErrorMsg:n.title?"":"Required.",yearlyPremiumErrorMsg:isNaN(n.yearlyPremium)?"Required.":""});return te({},e,{addInsurance:a});case A:return te({},e,{insuranceCategories:Object($.a)(t.insuranceCategories)});case k:return te({},e,{insuranceCategoriesFetchIndicator:!0});case w:return te({},e,{insuranceCategoriesFetchIndicator:!1});case T:var r=Object($.a)(e.insurances);return r.splice(t.index,1),te({},e,{insurances:r});default:return e}},ce=g()(),oe=Object(E.c)(re,Object(E.a)(Object(h.c)(ce),Z,b.a)),se=(ne="insurances",X(function(){if(window.localStorage){var e=window.localStorage.getItem(ne);if(e)return JSON.parse(e)}return null}));se&&se.forEach(function(e){oe.dispatch(M.addInsurance(e))});var ie=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(f.a,{store:oe},r.a.createElement(h.a,{history:ce},r.a.createElement("div",null,r.a.createElement(v,null),r.a.createElement(m.a,null,r.a.createElement(p.a,{exact:!0,path:"/",component:U}),r.a.createElement(p.a,{exact:!0,path:"/add-insurance",component:W})),r.a.createElement(K,null))))}}]),t}(a.Component);o.a.render(r.a.createElement(ie,null),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.c6d97623.chunk.js.map